name: test-linux

on: [push]

jobs:
  ubuntu:
    runs-on: ubuntu-latest
    container: ubuntu:latest
    steps:
      # - uses: actions/checkout@v2
      - name: Install required packages
        run: apt-get update && apt-get -y upgrade && apt-get install -y gcc git sudo make curl zsh
      - name: Clone this repo
        run: git clone --depth 1 https://github.com/nobu-g/dotfiles.git
      - name: Install dotfiles
        run: make install
        working-directory: ./dotfiles

  centos:
    runs-on: ubuntu-latest
    container: centos:latest
    steps:
      - name: Install required packages
        run: yum install -y gcc git sudo make curl zsh
      - name: Clone this repo
        run: git clone --depth 1 https://github.com/nobu-g/dotfiles.git
      - name: Install dotfiles
        run: make install
        working-directory: ./dotfiles

  fedora:
    runs-on: ubuntu-latest
    container: fedora:latest
    steps:
      - name: Install required packages
        run: dnf clean all && dnf install -y gcc git sudo make curl zsh
      - name: Clone this repo
        run: git clone --depth 1 https://github.com/nobu-g/dotfiles.git
      - name: Install dotfiles
        run: make install
        working-directory: ./dotfiles

  alpine:
    runs-on: ubuntu-latest
    container: alpine:latest
    steps:
      - name: Install required packages
        run: apk add gcc git sudo make curl zsh
      - name: Clone this repo
        run: git clone --depth 1 https://github.com/nobu-g/dotfiles.git
      - name: Install dotfiles
        run: make install
        working-directory: ./dotfiles
